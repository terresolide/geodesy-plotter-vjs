(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{148:function(t,e,s){var i=s(161);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,s(10).default)("5d2117b6",i,!0,{})},149:function(t,e,s){var i=s(163);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,s(10).default)("68a716ac",i,!0,{})},153:function(t,e,s){var i=s(174);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,s(10).default)("d4ca6da6",i,!0,{})},154:function(t,e,s){var i=s(176);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,s(10).default)("631b205a",i,!0,{})},158:function(t,e,s){var i={"./af":13,"./af.js":13,"./ar":14,"./ar-dz":15,"./ar-dz.js":15,"./ar-kw":16,"./ar-kw.js":16,"./ar-ly":17,"./ar-ly.js":17,"./ar-ma":18,"./ar-ma.js":18,"./ar-sa":19,"./ar-sa.js":19,"./ar-tn":20,"./ar-tn.js":20,"./ar.js":14,"./az":21,"./az.js":21,"./be":22,"./be.js":22,"./bg":23,"./bg.js":23,"./bm":24,"./bm.js":24,"./bn":25,"./bn-bd":26,"./bn-bd.js":26,"./bn.js":25,"./bo":27,"./bo.js":27,"./br":28,"./br.js":28,"./bs":29,"./bs.js":29,"./ca":30,"./ca.js":30,"./cs":31,"./cs.js":31,"./cv":32,"./cv.js":32,"./cy":33,"./cy.js":33,"./da":34,"./da.js":34,"./de":35,"./de-at":36,"./de-at.js":36,"./de-ch":37,"./de-ch.js":37,"./de.js":35,"./dv":38,"./dv.js":38,"./el":39,"./el.js":39,"./en-au":40,"./en-au.js":40,"./en-ca":41,"./en-ca.js":41,"./en-gb":42,"./en-gb.js":42,"./en-ie":43,"./en-ie.js":43,"./en-il":44,"./en-il.js":44,"./en-in":45,"./en-in.js":45,"./en-nz":46,"./en-nz.js":46,"./en-sg":47,"./en-sg.js":47,"./eo":48,"./eo.js":48,"./es":49,"./es-do":50,"./es-do.js":50,"./es-mx":51,"./es-mx.js":51,"./es-us":52,"./es-us.js":52,"./es.js":49,"./et":53,"./et.js":53,"./eu":54,"./eu.js":54,"./fa":55,"./fa.js":55,"./fi":56,"./fi.js":56,"./fil":57,"./fil.js":57,"./fo":58,"./fo.js":58,"./fr":59,"./fr-ca":60,"./fr-ca.js":60,"./fr-ch":61,"./fr-ch.js":61,"./fr.js":59,"./fy":62,"./fy.js":62,"./ga":63,"./ga.js":63,"./gd":64,"./gd.js":64,"./gl":65,"./gl.js":65,"./gom-deva":66,"./gom-deva.js":66,"./gom-latn":67,"./gom-latn.js":67,"./gu":68,"./gu.js":68,"./he":69,"./he.js":69,"./hi":70,"./hi.js":70,"./hr":71,"./hr.js":71,"./hu":72,"./hu.js":72,"./hy-am":73,"./hy-am.js":73,"./id":74,"./id.js":74,"./is":75,"./is.js":75,"./it":76,"./it-ch":77,"./it-ch.js":77,"./it.js":76,"./ja":78,"./ja.js":78,"./jv":79,"./jv.js":79,"./ka":80,"./ka.js":80,"./kk":81,"./kk.js":81,"./km":82,"./km.js":82,"./kn":83,"./kn.js":83,"./ko":84,"./ko.js":84,"./ku":85,"./ku.js":85,"./ky":86,"./ky.js":86,"./lb":87,"./lb.js":87,"./lo":88,"./lo.js":88,"./lt":89,"./lt.js":89,"./lv":90,"./lv.js":90,"./me":91,"./me.js":91,"./mi":92,"./mi.js":92,"./mk":93,"./mk.js":93,"./ml":94,"./ml.js":94,"./mn":95,"./mn.js":95,"./mr":96,"./mr.js":96,"./ms":97,"./ms-my":98,"./ms-my.js":98,"./ms.js":97,"./mt":99,"./mt.js":99,"./my":100,"./my.js":100,"./nb":101,"./nb.js":101,"./ne":102,"./ne.js":102,"./nl":103,"./nl-be":104,"./nl-be.js":104,"./nl.js":103,"./nn":105,"./nn.js":105,"./oc-lnc":106,"./oc-lnc.js":106,"./pa-in":107,"./pa-in.js":107,"./pl":108,"./pl.js":108,"./pt":109,"./pt-br":110,"./pt-br.js":110,"./pt.js":109,"./ro":111,"./ro.js":111,"./ru":112,"./ru.js":112,"./sd":113,"./sd.js":113,"./se":114,"./se.js":114,"./si":115,"./si.js":115,"./sk":116,"./sk.js":116,"./sl":117,"./sl.js":117,"./sq":118,"./sq.js":118,"./sr":119,"./sr-cyrl":120,"./sr-cyrl.js":120,"./sr.js":119,"./ss":121,"./ss.js":121,"./sv":122,"./sv.js":122,"./sw":123,"./sw.js":123,"./ta":124,"./ta.js":124,"./te":125,"./te.js":125,"./tet":126,"./tet.js":126,"./tg":127,"./tg.js":127,"./th":128,"./th.js":128,"./tk":129,"./tk.js":129,"./tl-ph":130,"./tl-ph.js":130,"./tlh":131,"./tlh.js":131,"./tr":132,"./tr.js":132,"./tzl":133,"./tzl.js":133,"./tzm":134,"./tzm-latn":135,"./tzm-latn.js":135,"./tzm.js":134,"./ug-cn":136,"./ug-cn.js":136,"./uk":137,"./uk.js":137,"./ur":138,"./ur.js":138,"./uz":139,"./uz-latn":140,"./uz-latn.js":140,"./uz.js":139,"./vi":141,"./vi.js":141,"./x-pseudo":142,"./x-pseudo.js":142,"./yo":143,"./yo.js":143,"./zh-cn":144,"./zh-cn.js":144,"./zh-hk":145,"./zh-hk.js":145,"./zh-mo":146,"./zh-mo.js":146,"./zh-tw":147,"./zh-tw.js":147};function n(t){var e=a(t);return s(e)}function a(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id=158},160:function(t,e,s){"use strict";s(148)},161:function(t,e,s){(e=s(9)(!1)).push([t.i,"\n.date-tooltip {\n   padding:3px 5px;\n   background:rgba(255,255,255,0.8);\n   border-radius: 3px;\n   border: 1px dotted grey;\n}\n",""]),t.exports=e},162:function(t,e,s){"use strict";s(149)},163:function(t,e,s){(e=s(9)(!1)).push([t.i,"\n.fmt-timeline[data-v-7abe1cad] {\n   pointer-events:auto;\n}\n.fmt-timeline.disabled[data-v-7abe1cad] {\n   pointer-events:  none;\n   opacity:0.8;\n} \n",""]),t.exports=e},164:function(t,e){function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}L.Control.Tiles=L.Control.Layers.extend({tiles:{osm:{name:"OpenStreetMap",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'},arcgisTopo:{name:"ArcGIS World Topo Map",url:"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:'Tiles © <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer">ArcGIS</a>'},arcgisSatellite:{name:"ArcGIS Satellite Tiles",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'Tiles © <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer">Arcgis</a>'}},initialize:function(t,e,s){for(var i in L.Control.Layers.prototype.initialize.call(this,t,e,s),this.tiles){var n=L.tileLayer(this.tiles[i].url,{attribution:this.tiles[i].attribution});this.tiles[i].layer=n,this.addBaseLayer(n,this.tiles[i].name)}},_addItem:function(t){var e=this._overlaysList;if(t.layer.first&&("object"===s(t.layer.first)?(title=t.layer.first.title,(i=document.createElement("div")).className="leaflet-control-layers-separator",e.appendChild(i)):title=t.layer.first,(i=document.createElement("b")).innerHTML=title,this._overlaysList.appendChild(i)),L.Control.Layers.prototype._addItem.call(this,t),t.layer.last){var i=document.createElement("div");if(t.layer.last.classname&&i.classList.add(t.layer.last.classname),t.layer.last.funct){i.style.textAlign="center";var n=document.createElement("input");n.setAttribute("type","button"),n.setAttribute("value",t.layer.last.name),t.layer.last.title&&n.setAttribute("title",t.layer.last.title),n.addEventListener("click",(function(e){t.layer.last.funct(e),e.stopPropagation()}),{once:!0,useCapture:!0}),i.appendChild(n)}else i.innerHTML="<b>"+t.layer.last.name+"</b>";this._overlaysList.appendChild(i)}}}),t.exports=L.Control.Tiles},165:function(t,e){L.DivIcon.Arrow=L.DivIcon.extend({options:{color:"blue",stroke:20,iconAnchor:[30,30],iconSize:[60,60],viewBox:"0 0 1500 1500",center:[750,750],arrow:[100,300,80],className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),s=this.options,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox",s.viewBox),i.setAttribute("class","arrow "+(s.arrow[2]>0?"up":"down")),i.setAttribute("style","width:"+s.iconSize[0]+"px;height:"+s.iconSize[1]+"px"),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","defs"),a=document.createElementNS("http://www.w3.org/2000/svg","marker"),r="arrowhead"+this.options.color;a.setAttribute("id",r),a.setAttribute("markerWidth",10),a.setAttribute("markerHeight",7),a.setAttribute("refX",10),a.setAttribute("refY",3.5),a.setAttribute("orient","auto");var o=document.createElementNS("http://www.w3.org/2000/svg","polygon");o.setAttribute("points","2.5 3.5, 0 0, 10 3.5, 0 7"),o.setAttribute("fill",s.color),a.appendChild(o),n.appendChild(a),i.appendChild(n);var l=document.createElementNS("http://www.w3.org/2000/svg","g");l.setAttribute("transform","translate("+this.options.center.join(",")+")"),i.appendChild(l);var d=document.createElementNS("http://www.w3.org/2000/svg","line");return d.setAttribute("stroke",s.color),d.setAttribute("stroke-width",s.stroke),d.setAttribute("marker-end","url(#"+r+")"),d.setAttribute("x1",0),d.setAttribute("y1",0),d.setAttribute("x2",Math.round(s.arrow[0])),d.setAttribute("y2",Math.round(-1*s.arrow[1])),l.append(d),this.options.html=i,this._setIconStyles(e,"icon"),e}}),t.exports=L.DivIcon.Arrow},173:function(t,e,s){"use strict";s(153)},174:function(t,e,s){(e=s(9)(!1)).push([t.i,".leaflet-div-icon {\n  /**  position: relative;\n    top: -50%;\n    left: -50%; **/\n    background: none;\n    border:none;\n}\n.leaflet-div-icon svg.arrow.up {\n  filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.7));\n}\n.leaflet-div-icon svg.arrow.down {\n  filter: drop-shadow(2px 0px 2px rgb(0 0 0 / 0.7));\n}",""]),t.exports=e},175:function(t,e,s){"use strict";s(154)},176:function(t,e,s){(e=s(9)(!1)).push([t.i,"\n.step {\n /* margin-right:45px;*/\n  text-align: left;\n  font-size:10px;\n  width:30px;height:5px;\n}\n.step:first-child:after {\n content:' 750';\n /* margin-right: -30px;*/\n  margin-left:35px;\n}\n.step:nth-child(15):before {\n content:'0';\n width:40px;\n margin-left:35px;\n}\n.step:last-child:before {\n content:'-750';\nmargin-left:35px;\n}\n#map {\n  min-height:500px;\n  height:100vh;\n  width:100%;\n}\n#map .leaflet-popup-scrolled {\n  border: none;\n  padding-top: 0;\n}\n#map h4 {\n  margin:0;\n}\ndiv.navigator {\n position: fixed;\n   bottom:5px;\n   width:auto;\n   left:50%;\n   -webkit-transform: translateX(-50%);\n    -moz-transform: translateX(-50%);\n    -ms-transform: translateX(-50%);\n    -o-transform: translateX(-50%);\n    transform: translateX(-50%);\n   text-align:center;\n   z-index:1000;\n   pointer-events:none;\n}\nh1 {\n   position: fixed;\n   bottom:0;\n   width:100%;\n   text-align:center;\n   z-index:1000;\n   pointer-events:none;\n}\n.leaflet-div-icon {\n  /**  position: relative;\n    top: -50%;\n    left: -50%; **/\n    background: none;\n    border:none;\n}\ndiv.marker-red{\n  width: 30px;\n  height: 30px;\n  background-color: darkred;\n  border: 1px solid black;\n  border-radius:3px;\n}\ndiv.marker-blue {\n  width: 30px;\n  height: 30px;\n  background-color: blue;\n  border: 1px solid black;\n  border-radius:3px;\n}\ndiv.leaflet-control-layers-overlays div.marker-red,\ndiv.leaflet-control-layers-overlays div.marker-blue {\n  display:inline-block;\n  width: 10px;\n  height: 10px;\n  vertical-align: middle;\n}\nul.menu-content {\n  font-size: 0.8rem;\n  border-bottom: 1px solid #adadad;\n  margin:5px 0;\n  padding: 5px 0 0 0;\n}\nul.menu-content li {\n  display: inline-block;\n   min-width: 50px;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  border: 1px solid #adadad;\n  border-bottom: none;\n  text-align: center;\n  color: black;\n  height: 30px;\n  padding:0;\n  vertical-align: middle;\n  margin: 0;\n  background: #efefef;\n  text-transform: capitalize;\n}\nul.menu-content li span {\n    text-transform: capitalize;\n    vertical-align: middle;\n    height: 30px;\n    min-width:50px;\n    color:black;\n    padding: 5px 10px 0 10px;\n    text-decoration: none;\n    display:inline-block;\n    cursor:pointer;\n}\nul.menu-content li span:hover {\n  color:#b8412c;\n}\nul.menu-content li span.selected {\n  background:white;\n  color:#b8412c;\n}\n",""]),t.exports=e},187:function(t,e,s){"use strict";s.r(e);var i=s(7),n=s.n(i),a=s(159),r=s.n(a),o=s(8),l={name:"FmtTimeline",props:{values:{type:Array|Object,default:null},defaut:{type:String,value:"2020-03-15"}},watch:{values:function(t){console.log("newvalue"),this.display(t,0)}},data:function(){return{dates:[],chart:null,max:0,drawing:!1,resizeListener:null,width:window.innerWidth-30}},created:function(){this.resizeListener=this.resize.bind(this),window.addEventListener("resize",this.resizeListener)},mounted:function(){console.log(this.width),this.display(this.values,0)},destroy:function(){window.addEventListener("resize",this.resizeListener),this.resizeListener=null},methods:{display:function(t,e){var s=this;if(!t){if(e>=this.dates.length){if(this.drawing=!1,this.defaut){var i=n.a.utc(this.defaut+"T12:00:00.000Z");this.plotLine(i.valueOf(),i.format("ll"))}return}for(var a=e;a<e+1e3&&a<this.dates.length;a++)this.chart.series[0].addPoint(this.dates[a],!1),this.max<this.dates[a][1]&&(this.max=this.dates[a][1]);return this.chart.redraw(),this.chart.yAxis[0].setExtremes(0,this.max,!0,!1),void setTimeout((function(){s.display(null,e+1e3)}),0)}if(this.drawing=!0,this.chart&&(this.chart.destroy(),this.chart=null),this.dates=[],0!==Object.keys(t).length){for(var r in t)this.dates.push([parseInt(r),t[r]]);var l=this.$el.querySelector(".fmt-timeline");this.chart=o.chart(l,{chart:{height:100,width:s.width,plotBorderColor:"#666666",plotBorderWidth:0,type:"column",zoomType:"x"},exporting:{enabled:!1},title:{text:"",align:"float"},legend:{enabled:!1},credits:{enabled:!1},tooltip:{xDateFormat:"%b %e, %Y",shadow:!1,borderWidth:0,backgroundColor:"rgba(255,255,255,0.8)"},plotOptions:{column:{stacking:"normal",pointPadding:0,borderWidth:.1,groupPadding:0,shadow:!1}},xAxis:{type:"datetime",lineColor:"#666",tickLength:5,dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e %b %Y",week:"%e. %b",month:"%b %y",year:"%Y"},min:s.dates[0][0],max:s.dates[s.dates.length-1][0],crosshair:{color:"darkgrey",zIndex:1e3}},yAxis:{title:{enabled:!1},allowDecimals:!1,min:0,max:s.max},series:[{name:"Nb Stations",type:"column",color:"darkblue",data:[],cursor:"pointer",events:{click:function(t,e){var i=n.a.unix(t.point.x/1e3);s.plotLine(t.point.x,i.format("ll")),s.$emit("select",i.format("YYYY-MM-DD"))}}}]}),setTimeout((function(){s.display(null,e)}))}},plotLine:function(t,e){this.chart&&(this.chart.xAxis[0].removePlotLine("highlight"),this.chart.xAxis[0].addPlotLine({color:"#999999",value:t,width:2,zIndex:1e3,id:"highlight",label:{text:'<div class="date-tooltip">'+e+"</div>",align:"center",useHTML:!0,rotation:0,y:20}}))},resize:function(){this.width=window.innerWidth-30,this.chart.setSize(this.width,null,!0)}}},d=(s(160),s(162),s(11)),c=Object(d.a)(l,(function(){var t=this._self._c;return t("div",[t("div",{staticClass:"fmt-timeline",class:{disabled:this.drawing}})])}),[],!1,null,"7abe1cad",null).exports,h=s(150),p=s(150);p.TilesControl=s(164),p.DivIcon.Arrow=s(165),delete h.Icon.Default.prototype._getIconUrl,h.Icon.Default.mergeOptions({iconRetinaUrl:s(166),iconUrl:s(151),shadowUrl:s(167)});var u={name:"SpotGins",components:{JsonDiv:function(){return s.e(4).then(s.bind(null,188))},SpotginsGraph:function(){return Promise.all([s.e(3),s.e(5)]).then(s.bind(null,189))},FmtTimeline:c},props:{root:{type:String,default:"https://catalog.formater/FROST-Server/v1.1/"},top:{type:Number,default:2}},data:function(){return{map:null,stations:[],dates:null,preDates:null,json:null,datastreamId:null,layerControl:null,bounds:null,mode:"graph",selected:null,img:null,imgMin:null,dataAsciiUrl:null,sitelog:null,show:!1,loaded:!1,popup:null,stationLayers:null,groupLayers:[],dateLayers:null,showNavigation:!1,loadedDates:!1,defaultDate:"2021-03-15",temp:{start:"2007-03-25",end:"2022-05-21"},searching:!1,colorScale:null}},mounted:function(){this.initialize()},methods:{initialize:function(){this.map=p.map("map",{scrollWheelZoom:!0}).setView([20,-.09],3),this.layerControl=new p.TilesControl(null,null,{position:"topright"}),this.layerControl.tiles.arcgisTopo.layer.addTo(this.map),this.layerControl.addTo(this.map),this.popup=p.popup({minWidth:450,minHeight:500,maxHeight:500});var t=document.querySelector("#json");this.popup.setContent(t),this.colorScale=r.a.scale("RdYlBu").padding(-.9),this.colorScale=r.a.scale(["#a50026","#313695"]),console.log(this.colorScale.colors(20)),this.dateLayers=p.layerGroup();var e=this;this.dateLayers.on("add",(function(t){e.showNavigation=!0,e.loadedDates=!0})),this.dateLayers.on("remove",(function(t){e.showNavigation=!1})),this.dateLayers.first="Les observations",this.layerControl.addOverlay(this.dateLayers,"Par date"),this.load(0),this.searchObservations(this.defaultDate)},load:function(t,e){var s=this;this.root||alert("Pas de service SensorThings!");var i=e||this.root+"Things?$top="+this.top+"&$expand=Locations,Datastreams";this.$http.get(i).then((function(e){s.display(e.body,t)}),(function(t){alert("Erreur de chargement: "+t.status)}))},reset:function(){this.loaded=!1,this.img=null,this.imgMin=null,this.json=null,this.dataAsciiUrl=null},searchObservations:function(t){var e=this;this.$http.get(this.root+"/Observations?$select=result&$filter=date(phenomenonTime) eq date("+t+")&$expand=FeatureOfInterest").then((function(t){e.displayDate(t.body)}))},addStation:function(t){if(!this.stations[t])return this.bounds&&this.map.fitBounds(this.bounds,{padding:[20,20]}),void(this.loadedDates=!0);var e=this.stations[t].properties.groupId,s=1===e?"marker-blue":"marker-red",i=p.divIcon({className:s}),n=this,a=p.geoJSON(this.stations[t],{pointToLayer:function(t,e){var s=p.marker(e,{icon:i,title:t.id});return s.on("click",n.getData),s}}),r=!1;0===this.groupLayers.length&&(r="Les stations"),this.groupLayers[e]?this.groupLayers[e].addLayer(a):(this.groupLayers[e]=p.layerGroup([a]),this.groupLayers[e].first=!!r&&{title:r,separator:!0},this.layerControl.addOverlay(this.groupLayers[e],"Groupe "+e+' <div class="'+s+'"></div>'),this.groupLayers[e].addTo(this.map));var o=a.getBounds();this.bounds?this.bounds.extend(o):this.bounds=o,this.stations[t].layer=a,this.addStation(t+1)},fillDates:function(t,e){for(var s=n.a.utc(t.substr(0,10)+"T12:00:00.000Z"),i=s.valueOf(),a=n.a.utc(e.substr(0,10)+"T12:00:00.000Z").valueOf();i<a;)this.preDates[i]?this.preDates[i]=this.preDates[i]+1:this.preDates[i]=1,s.add(1,"d"),i=s.valueOf()},display:function(t,e){var s=this;0===e&&(this.preDates={}),t.value.forEach((function(t){if(t.Locations[0]){var e=t.Locations[0].location;e.properties=Object.assign({name:t.name,description:t.description},t.properties),e.datastream=t.Datastreams[0];var i=e.datastream.phenomenonTime.split("/");i[0]&&i[0].substr(0,10)<s.temp.start&&(s.temp.start=i[0].substr(0,10)),i[1]&&i[1].substr(0,10)>s.temp.end&&(s.temp.end=i[1].substr(0,10)),s.fillDates(i[0],i[1]),e["@iot.id"]=t["@iot.id"],s.stations.push(e)}})),this.addStation(e),t["@iot.nextLink"]?this.load(this.stations.length,t["@iot.nextLink"]):this.dates=this.preDates},displayDate:function(t){this.dateLayers.clearLayers();var e=this;t.value.forEach((function(t){e.addVector(t)}))},addVector:function(t){var e=new p.DivIcon.Arrow({arrow:t.result,color:this.colorScale((t.result[2]+750)/1500).hex()}),s="<b>"+t.FeatureOfInterest.name+"</b>";s+="<br>E: "+t.result[0]+" mm<br>N: "+t.result[1]+" mm<br>Up: "+t.result[2]+" mm";var i=p.geoJSON(t.FeatureOfInterest.feature,{pointToLayer:function(t,s){return p.marker(s,{icon:e,title:t.id})}}).bindTooltip(s);this.dateLayers.addLayer(i)},download:function(t){var e=null;"json"===t&&(e=this.dataJsonUrl),"ascii"===t&&(e=this.dataAsciiUrl),this.$http.get(e,{responseType:"blob"}).then((function(t){if(t.bodyBlob){var s=window.URL.createObjectURL(t.bodyBlob),i=document.createElement("a");i.href=s,i.download=e.split("/").pop(),document.body.appendChild(i),i.click(),document.body.removeChild(i)}}))},getData:function(t){this.mode="graph",this.loaded!==t.target.id&&(this.show=!0,this.img=t.target.feature.datastream.properties.img,this.imgMin=this.img,this.datastreamId=t.target.feature.datastream["@iot.id"],this.dataAsciiUrl=t.target.feature.datastream.properties.file,this.json=t.target.feature.properties,this.popup.setLatLng(t.target.getLatLng()),this.popup.openOn(this.map))},getDataOld:function(t){if(this.mode="graph",this.loaded!==t.target.id){var e=t.target.feature.id;this.loaded=e,this.selected=e,this.img=this.scheme.img.replaceAll("[id]",e),this.imgMin=this.scheme.imgMin.replaceAll("[id]",e),this.popup.setLatLng(t.target.getLatLng()),this.popup.openOn(this.map),this.dataJsonUrl=this.scheme.dataJSON.replaceAll("[id]",e),this.dataAsciiUrl=this.scheme.dataASCII.replaceAll("[id]",e),this.sitelog=this.scheme.sitelog.replaceAll("[id]",e)}},createPopup:function(t){this.mode="graph"}}},m=(s(168),s(173),s(175),Object(d.a)(u,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"relative"}},[t.showNavigation?t._e():e("h1",[t._v("SPOT GINS TEST")]),t._v(" "),t.colorScale?e("div",{directives:[{name:"show",rawName:"v-show",value:t.showNavigation,expression:"showNavigation"}],staticStyle:{"font-size":"12px",position:"fixed",left:"20px",bottom:"110px","z-index":"1000","border-radius":"4px",border:"2px solid rgba(0,0,0,0.2)",padding:"3px 3px 8px 3px",background:"white"}},[e("div",{staticStyle:{padding:"3px 3px 5px 3px"}},[t._v("Up (mm)")]),t._v(" "),e("div",[e("div",{staticClass:"step"}),t._v(" "),t._l(t.colorScale.colors(30).reverse(),(function(t,s){return e("div",{staticClass:"step",style:{background:t}})}))],2)]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showNavigation,expression:"showNavigation"}],staticClass:"navigator"},[t.loadedDates?e("fmt-timeline",{attrs:{values:t.dates,defaut:t.defaultDate},on:{select:t.searchObservations}}):t._e()],1),t._v(" "),e("div",{attrs:{id:"map"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticStyle:{background:"white","max-width":"450px","min-height":"500px","max-height":"500px"},attrs:{id:"json"}},[e("h4",[t._v(t._s(t.selected))]),t._v(" "),e("ul",{staticClass:"menu-content"},[e("li",{on:{click:function(e){t.mode="station"}}},[e("span",{class:{selected:"station"===t.mode}},[t._v("Station")])]),t._v(" "),e("li",{on:{click:function(e){t.mode="graph"}}},[e("span",{class:{selected:"graph"===t.mode}},[t._v("Graphique")])]),t._v(" "),e("li",{on:{click:function(e){t.mode="data"}}},[e("span",{class:{selected:"data"===t.mode}},[t._v("Interactif")])]),t._v(" "),e("li",{on:{click:function(e){t.mode="download"}}},[e("span",{class:{selected:"download"===t.mode}},[t._v("Téléchargement")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"station"===t.mode,expression:"mode === 'station'"}],staticStyle:{"max-height":"420px","overflow-y":"scroll"}},[e("json-div",{attrs:{json:t.json,selected:"station"===t.mode,deployed:!0}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"graph"===t.mode,expression:"mode === 'graph'"}],staticStyle:{"text-align":"center","max-height":"420px",overflow:"scroll"}},[t.imgMin?e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}]},[e("a",{attrs:{href:t.img,target:"_blank"}},[e("img",{attrs:{src:t.imgMin,width:"350"},on:{load:function(e){t.loaded=!0}}})])]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"data"===t.mode,expression:"mode === 'data'"}],staticStyle:{"text-align":"center","max-height":"420px",overflow:"scroll"}},[e("spotgins-graph",{attrs:{url:t.root,id:t.datastreamId,selected:"data"===t.mode}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"download"===t.mode,expression:"mode === 'download'"}],staticStyle:{margin:"20px"}},[e("input",{attrs:{type:"button",value:"Télécharger ASCII"},on:{click:function(e){return t.download("ascii")}}})])])])}),[],!1,null,null,null));e.default=m.exports}}]);
//# sourceMappingURL=2.spot-gins-vjs.js.map